dependencies:
  pre:
    - sudo apt-get install python-dev
    - sudo pip install awsebcli

deployment:
  production:
    branch: master
    commands:
      - lein uberjar
      - git config user.email "colarte@barista-v.com"
      - git config user.name "devops"
      - git add -f target/hello-world.jar
      - git commit -m "devops lab"
      - eb deploy --profile default
  staging:
    branch: staging
    commands:
      - lein uberjar
      - git config user.email "colarte@barista-v.com"
      - git config user.name "devops"
      - git add -f target/hello-world.jar
      - git commit -m "devops lab"
      - sed -i 's/target-env/staging/g' ss/.elasticbeanstalk/config.yml
      - eb deploy --profile default
